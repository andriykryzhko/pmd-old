<?xml version="1.0"?>

<ruleset name="newrules">
  <description>
These are new rules for the next release
  </description>

    <rule name="DontImportSunRule"
       message="Avoid importing anything from the 'sun.*' packages"
       class="net.sourceforge.pmd.rules.XPathRule">
       <description>
          Avoid importing anything from the 'sun.*' packages.  These packages are not portable and are likely to change.
       </description>
       <properties>
          <property name="xpath">
               <value>
<![CDATA[
   //ImportDeclaration
   [starts-with(Name/@Image, 'sun.')]
   [not(starts-with(Name/@Image, 'sun.misc.Signal'))]
]]>

               </value>
          </property>
       </properties>
       <priority>4</priority>

       <example>
<![CDATA[
   import sun.misc.foo;
   public class Foo {}
]]>
       </example>
    </rule>

    <rule name="EmptyFinalizer"
          message="Avoid empty finalize methods"
          class="net.sourceforge.pmd.rules.XPathRule">
       <description>
       If the finalize() method is empty, then it does not need to exist.
       </description>
        <properties>
            <property name="xpath">
                <value>
<![CDATA[
   //MethodDeclaration[MethodDeclarator[@Image='finalize'][not(FormalParameters/*)]]
      /Block[count(*)=0]
]]>
                </value>
            </property>
        </properties>
        <priority>3</priority>
       <example>
<![CDATA[
   public class Foo {
       public void finalize() {}
   }
]]>
       </example>
     </rule>

    <rule name="EmptyStaticInitializer"
           message="Empty static initializer was found"
           class="net.sourceforge.pmd.rules.XPathRule">
       <description>
       An empty static initializer was found.
       </description>
         <properties>
             <property name="xpath">
                 <value>
<![CDATA[
//ClassBodyDeclaration/Initializer[@Static='true']/Block[count(*)=0]
]]>
                 </value>
             </property>
         </properties>
         <priority>3</priority>
       <example>
   <![CDATA[
 public class Foo {
  // why are there no statements in this static block?
  static {}
 }
   ]]>
       </example>
     </rule>

    <rule name="AvoidDollarSigns"
           message="Avoid using dollar signs in variable/method/class/interface names"
           class="net.sourceforge.pmd.rules.XPathRule">
       <description>
       Avoid using dollar signs in variable/method/class/interface names.
       </description>
         <properties>
             <property name="xpath">
                 <value>
<![CDATA[
//UnmodifiedClassDeclaration[contains(@Image, '$')]
|
//VariableDeclaratorId[contains(@Image, '$')]
|
//UnmodifiedInterfaceDeclaration[contains(@Image, '$')]
|
//MethodDeclarator[contains(@Image, '$')]
 ]]>
                 </value>
             </property>
         </properties>
         <priority>3</priority>
       <example>
   <![CDATA[
 public class Fo$o {  // yikes!
 }
   ]]>
       </example>
     </rule>


    <rule name="UnconditionalIfStatement"
       message="Do not use 'if' statements that are always true or always false"
          class="net.sourceforge.pmd.rules.XPathRule">
      <description>
      Do not use "if" statements that are always true or always false.
      </description>
        <properties>
            <property name="xpath">
                <value>
                    <![CDATA[
//IfStatement/Expression/ConditionalAndExpression
 /InstanceOfExpression/UnaryExpression
 /PrimaryExpression/PrimaryPrefix/Literal/BooleanLiteral
                    ]]>
                </value>
            </property>
        </properties>
        <priority>3</priority>
      <example>
  <![CDATA[
public class Foo {
 public void close() {
  if (true) {
       // ...
   }
 }
}
  ]]>
      </example>
    </rule>

    <rule name="FinalizeOnlyCallsSuperFinalize"
          message="Finalize should do something besides just calling super.finalize()"
          class="net.sourceforge.pmd.rules.XPathRule">
       <description>
       If the finalize() is implemented, it should do something besides just calling
       super.finalize().
       </description>
        <properties>
            <property name="xpath">
                <value>
<![CDATA[
   //MethodDeclaration[MethodDeclarator[@Image="finalize"][not(FormalParameters/*)]]
       /Block[count(BlockStatement)=1]
         /BlockStatement[Statement/StatementExpression/PrimaryExpression
          /PrimaryPrefix[@Image="finalize"]
]]>
                </value>
            </property>
        </properties>
        <priority>3</priority>
       <example>
           <![CDATA[
               public class Foo {
                   public void finalize() {
                     super.finalize();
                   }
               }
           ]]>
       </example>
     </rule>

<rule name="FinalizeOverloaded"
      message="Finalize methods should not be overloaded"
      class="net.sourceforge.pmd.rules.XPathRule">
   <description>
   Methods named finalize() should not have parameters.  It is
   confusing and probably a bug to overload finalize().  It will
   not be called by the VM.
   </description>
    <properties>
        <property name="xpath">
            <value>
<![CDATA[
//MethodDeclaration
 [MethodDeclarator[@Image="finalize"][FormalParameters/*]]
]]>
            </value>
        </property>
    </properties>
    <priority>3</priority>
   <example>
<![CDATA[
   public class Foo {
       // this is confusing and probably a bug
       public void finalize(int a) {
       }
   }
]]>
   </example>
 </rule>

 </ruleset>


