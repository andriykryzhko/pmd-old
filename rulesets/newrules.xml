<?xml version="1.0"?>

<ruleset name="newrules">
  <description>
These are new rules for the next release
  </description>

    <rule name="AbstractNamingRule"
          message="Abstract classes should be named 'AbstractXXX'"
          class="net.sourceforge.pmd.rules.XPathRule">
       <description>
  Abstract classes should be named 'AbstractXXX'.
       </description>
        <priority>3</priority>
        <properties>
            <property name="xpath">
                <value>
                    <![CDATA[
//ClassDeclaration[@Abstract='true']
 /UnmodifiedClassDeclaration[starts-with(@Image,'Abstract') = 0]
                    ]]>
                </value>
            </property>
        </properties>
       <example>
<![CDATA[
public abstract class Foo { // should be AbstractFoo
}
]]>
       </example>
    </rule>

    <rule name="ProperCloneImplementationRule"
         message="Object clone() should be implemented with super.clone()"
         class="net.sourceforge.pmd.rules.XPathRule">
     <description>
     Object clone() should be implemented with super.clone()
     </description>
     <properties>
         <property name="xpath">
             <value>
                 <![CDATA[
//ClassDeclaration//MethodDeclarator
[@Image = 'clone']
[count(FormalParameters/*) = 0]
[count(../Block//*[
	(self::AllocationExpression) and
	(./Name/@Image = ancestor::
UnmodifiedClassDeclaration[position()=last()]/@Image)
  ])> 0
]
                ]]>
             </value>
         </property>
     </properties>
        <priority>2</priority>

     <example>
 <![CDATA[
class Foo{
	public Object clone(){
		return new Foo(); // This is bad
	}
}
]]>
     </example>
     </rule>

</ruleset>


