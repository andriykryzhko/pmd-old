<?xml version="1.0"?>

<ruleset name="newrules">
  <description>
These are new rules for the next release
  </description>


    <rule name="BadComparisonRule"
          message="Avoid equality comparisons with Double.NaN"
          class="net.sourceforge.pmd.rules.XPathRule">
      <description>
  Avoid equality comparisons with Double.NaN - these are
likely to be logic errors.
      </description>
      <properties>
          <property name="xpath">
              <value>
                  <![CDATA[
//EqualityExpression
[@Image='==']
/PrimaryExpression/PrimaryPrefix/Name[@Image='Double.NaN' or @Image='Float.NaN']
                  ]]>
              </value>
          </property>
      </properties>
        <priority>3</priority>

      <example>
  <![CDATA[
public class Bar {
int x = (y == Double.NaN);
}
  ]]>
      </example>
    </rule>


    <rule name="ExceptionAsFlowControlRule"
          message="Avoid using exceptions as flow control"
          class="net.sourceforge.pmd.rules.design.ExceptionAsFlowControlRule">
      <description>
          Using Exceptions as flow control leads to GOTOish code.
      </description>
        <priority>3</priority>
      <example>
  <![CDATA[
  public class Foo {
   void bar() {
    try {
     try {
     } catch (Exception e) {
      throw new WrapperException(e);
      // this is essentially a GOTO to the WrapperException catch block
     }
    } catch (WrapperException e) {
     // do some more stuff
    }
   }
  }
  ]]>
      </example>
    </rule>


 </ruleset>


