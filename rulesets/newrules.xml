<?xml version="1.0"?>

<ruleset name="newrules">
  <description>
These are new rules for the next release
  </description>


<rule   name="EqualsNull"
        message="Don't use equals() to compare against null"
        class="net.sourceforge.pmd.rules.XPathRule">
    <description>
     Newbie programmers sometimes get the comparison concepts confused
     and use equals() to compare to null.
    </description>
    <properties>
        <property name="xpath">
            <value>
<![CDATA[
//PrimaryExpression
 [PrimaryPrefix/Name[ends-with(@Image, 'equals')]]
 [PrimarySuffix/Arguments/ArgumentList
  /Expression/PrimaryExpression/PrimaryPrefix
   /Literal/NullLiteral]
]]>
            </value>
        </property>
     </properties>
    <priority>1</priority>
<example>
   <![CDATA[
class Bar {
   void foo() {
       String x = "foo";
       if (x.equals(null)) { // bad!
        doSomething();
       }
   }
}
]]>
    </example>
    </rule>

<rule   name="ConfusingTernaryExpression"
        message="This ternary expression could be simplified"
        class="net.sourceforge.pmd.rules.XPathRule">
    <description>
     Using != in ternary expressions can be confusing; try
        rewriting this to use ==.
    </description>
    <properties>
        <property name="xpath">
            <value>
<![CDATA[
//ConditionalExpression
  [EqualityExpression[@Image="!="]
 or
  PrimaryExpression/PrimaryPrefix/Expression/EqualityExpression[@Image="!="]]
]]>
            </value>
        </property>
     </properties>
    <priority>1</priority>
<example>
   <![CDATA[
class Foo {
 void bar() {
  x = a != b ? c : d; // confusing
  x = a == b ? d : c; // ah, that's better
 }
}
]]>
    </example>
    </rule>


</ruleset>


